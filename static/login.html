<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" type="text/css" href="login.css" />
</head>

<body>
    <div id="login">
        <h1>Login</h1>
        <div>
            <input id="username" type="text" placeholder="username" name="u"></input>
            <input id="password" type="password" placeholder="password" name="p"></input>
            <button type="button" class="but" onclick="login()">Login</button>
        </div>

    </div>
</body>

</html>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    var socket = new WebSocket("ws://127.0.0.1:8088/login");
    socket.onopen = function() {
        var newTag = document.createElement('div');
        newTag.innerHTML = "【连接成功】";
        document.getElementById('login').appendChild(newTag);
    };
    socket.onmessage = function(event) {
        var response = event.data;
        if (response == '200') {
            window.location.href = "chat.html"
        }
        /*var newTag = document.createElement('div');
        newTag.innerHTML = response;
        document.getElementById('login').appendChild(newTag);*/
    };
    socket.onclose = function(event) {
        var newTag = document.createElement('div');
        newTag.innerHTML = "【连接失败】";
        document.getElementById('login').appendChild(newTag);
    };

    function login() {
        let httpurl = "";
        let username = document.getElementById("username");
        let password = document.getElementById("password");
        if (username == "" || username == null) {
            alert("username is empty");
            return;
        }
        if (password == "" || password == null) {
            alert("password is empty");
            return;
        }
        socket.send(username.value + '::::' + password.value);
        /*axios({
            url: "www.baidu.com",
            method: "get"
        }).then(function(response) {
            if (response.status == 200) {
                socket.close();
                window.location.href = "search.html"
            }
            console.log(response.status)
        }).catch(function(err) {
            console.log(err)
        });*/
    }
</script>